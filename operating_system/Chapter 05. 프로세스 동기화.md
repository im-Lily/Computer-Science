## Chapter 05. 프로세스 동기화

### 목차

[01. 프로세스 간 통신](#01-프로세스 간 통신)

[02. 공유 자원과 임계구역](#02-공유 자원과 임계구역)

[03. 임계구역 해결 방법](#03-임계구역 해결 방법)

[04. [심화학습] 파일, 파이프, 소켓 프로그래밍](#04-파일, 파이프, 소켓 프로그래밍)



### 01. 프로세스 간 통신

1. 프로세스 간 통신 개념

   프로세스가 다른 프로세스와 데이터를 주고받는 프로세스 간 통신(IPC)에는 3가지 종류가 있다.

   - 프로세스 내부 데이터 통신 : 멀티 스레드의 경우 전역 변수나 파일을 이용하여 데이터 공유
   - 프로세스 간 데이터 통신 : 같은 컴퓨터에 있는 여러 프로세스끼리 통신하는 경우로 공용 파일이나 운영체제가 제공하는 파이프를 사용하여 통 신
   - 네트워크를 이용한 데이터 통신 : 여러 컴퓨터가 네트워크로 연결되어 있는 경우 소켓을 이용하여 데이터 통신 = 네트워킹
     - 소켓을 이용한 데이터 통신은 많은 전처리로 인해 다른 프로세스 간 통신보다 느림 => 같은 컴퓨터에 있는 프로세스 간 통신에는 소켓 사용X

2. 프로세스 간 통신의 분류

   i. 통신 방향에 따른 분류

   - 양방향 통신 : 데이터를 동시에 양쪽 방향으로 전송 

     ex) 소켓 통신

   - 반양방향 통신 : 데이터를 양쪽 방향으로 전송할 수 있지만 동시 전송 불가능, 특정 시점에 한쪽 방향으로만 전송 가능

     ex) 무전기

   - 단방향 통신 : 한쪽 방향으로만 데이터 전송 가능

     ex) 전역 변수와 파이프

   ii. 통신 구현 방식에 따른 분류

   - 대기가 있는 통신(= 동기화 통신) : 동기화 지원 O - 데이터를 받는 쪽은 데이터가 도착할 때까지 자동으로 대기 상태에 머묾

     ex) 파이프, 소켓

   - 대기가 없는 통신(= 비동기화 통신) : 동기화 지원 X - 데이터를 받는 쪽은 바쁜 대기를 사용하여 데이터 도착 여부 직접 확인 -> 자원 낭비

     ex) 전역 변수, 파일

3. 프로세스 간 통신의 종류

   i. 전역 변수를 이용한 통신 
   - 공동으로 관리하는 메모리를 사용하여 데이터를 주고받는 것
   - 데이터를 보내는 쪽에서 전역 변수나 파일에 값을 쓰고, 데이터를 받는 쪽에서 전역 변수의 값을 읽는다.

   ii. 파일을 이용한 통신
   - 파일 열기 
   - 읽기 또는 쓰기 연산
   - 파일 닫기

   iii. 파이프를 이용한 통신
   - 운영체제가 제공하는 동기화 통신 방식으로, 단뱡향 통신이다.
   - 양방향 통신을 위해서 2개의 파이프가 필요하다.
   - 이름 없는 파이프 : 부모-자식 프로세스와 같이 서로 관련있는 프로세스 간 통신에 사용
   - 이름 있는 파이프 : 독립적인 프로세스 간 통신에 사용

   iv. 소켓을 이용한 통신
   - 여러 컴퓨터에 있는 프로세스끼리 통신하는 방법
   - 소켓 바인딩 후 쓰기 연산을 하면 데이터가 전송되고, 읽기 연산을 하면 데이터를 받을 수 있다.

    ![](https://images.velog.io/images/im_lily/post/09095ebb-3b09-4707-9157-7d44afe02fd3/image.png) 

------

### 02. 공유 자원과 임계구역

1. 공유 자원의 접근

   공유 자원은 여러 프로세스가 공동으로 이용하는 변수, 메모리, 파일 등으로 공동으로 이용 => 누가 언제 데이터를 읽거나 쓰느냐에 따라 결과가 달라짐

   2개 이상의 프로세스가 공유 자원을 병행적으로 읽거나 쓸 때 경쟁 조건 발생 => 공유 자원 접근 순서에 따라 실행 결과 달라짐

2. 임계구역

   공유 자원 접근 순서에 따라 실행 결과가 달라지는 프로그램 영역인 임계구역에서는 프로세스들이 동시에 작업 진행 X

   어떤 프로세스가 임계구역에 들어가면 다른 프로세스는 임계구역 밖에서 기다려야 하며 임계구역의 프로세스가 나와야 들어갈 수 있음

3. 생산자-소비자 문제

   생산자 프로세스와 소비자 프로세스가 서로 독립적으로 작업을 하는데 전역 변수에 접근하는 타이밍을 서로 맞추지 않을 경우 문제 발생

4. 임계구역 해결 조건

   - 상호 배제
   한 프로세스가 임계구역에 들어가면 다른 프로세스는 임계구역에 들어갈 수 없음

   - 한정 대기
   어떤 프로세스도 무한 대기하지 않고 임계구역에 진입

   - 진행의 융통성
   한 프로세스가 다른 프로세스의 진행을 방해해서는 안됨

------

### 03. 임계구역 해결 방법

------

### 04. [심화학습] 파일, 파이프, 소켓 프로그래밍

------

Reference

- https://rlg1133.tistory.com/103?category=425230